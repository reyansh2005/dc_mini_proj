<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Distributed File System Simulation</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/components.css">
    <link rel="stylesheet" href="styles/animations.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="header-content">
            <h1>üåê Distributed File System Simulation</h1>
            <div class="header-status">
                <span class="single-client-indicator">SINGLE CLIENT MODE</span>
                <div class="connection-status" id="connectionStatus">
                    <span class="status-indicator" id="statusIndicator"></span>
                    <span id="statusText">Disconnected</span>
                </div>
            </div>
        </div>
    </header>

    <!-- Main Container -->
    <div class="container">
        <!-- Connection Management Panel -->
        <section class="panel connection-panel">
            <h2>üîå Connection Management</h2>
            <div class="connection-controls">
                <button id="connectBtn" class="btn btn-primary">Connect</button>
                <button id="disconnectBtn" class="btn btn-secondary" disabled>Disconnect</button>
                <div class="connection-config">
                    <label for="wsUrl">WebSocket URL:</label>
                    <input type="text" id="wsUrl" value="ws://localhost:12345" readonly>
                </div>
            </div>
            <div class="connection-stats">
                <div class="stat-item">
                    <span class="stat-label">Uptime:</span>
                    <span class="stat-value" id="uptime">00:00:00</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Messages:</span>
                    <span class="stat-value" id="messageCount">0</span>
                </div>
                <div class="stat-item">
                    <span class="stat-label">Client ID:</span>
                    <span class="stat-value" id="clientId">Not Assigned</span>
                </div>
            </div>
        </section>

        <!-- System Overview Grid -->
        <div class="system-grid">
            <!-- Server Cluster Monitor -->
            <section class="panel server-cluster-panel">
                <h2>üñ•Ô∏è Server Cluster Monitor</h2>
                <div class="server-grid">
                    <div class="server-card" data-port="2001">
                        <div class="server-header">
                            <span class="server-title">Server 1</span>
                            <span class="server-port">:2001</span>
                        </div>
                        <div class="server-status" id="server-2001-status">
                            <span class="status-dot"></span>
                            <span class="status-text">Offline</span>
                        </div>
                        <div class="server-stats">
                            <div class="stat">
                                <span class="stat-label">Connections:</span>
                                <span class="stat-value" id="server-2001-connections">0</span>
                            </div>
                            <div class="stat">
                                <span class="stat-label">Load:</span>
                                <span class="stat-value" id="server-2001-load">0%</span>
                            </div>
                        </div>
                        <div class="server-traffic" id="server-2001-traffic"></div>
                    </div>

                    <div class="server-card" data-port="2002">
                        <div class="server-header">
                            <span class="server-title">Server 2</span>
                            <span class="server-port">:2002</span>
                        </div>
                        <div class="server-status" id="server-2002-status">
                            <span class="status-dot"></span>
                            <span class="status-text">Offline</span>
                        </div>
                        <div class="server-stats">
                            <div class="stat">
                                <span class="stat-label">Connections:</span>
                                <span class="stat-value" id="server-2002-connections">0</span>
                            </div>
                            <div class="stat">
                                <span class="stat-label">Load:</span>
                                <span class="stat-value" id="server-2002-load">0%</span>
                            </div>
                        </div>
                        <div class="server-traffic" id="server-2002-traffic"></div>
                    </div>

                    <div class="server-card" data-port="2003">
                        <div class="server-header">
                            <span class="server-title">Server 3</span>
                            <span class="server-port">:2003</span>
                        </div>
                        <div class="server-status" id="server-2003-status">
                            <span class="status-dot"></span>
                            <span class="status-text">Offline</span>
                        </div>
                        <div class="server-stats">
                            <div class="stat">
                                <span class="stat-label">Connections:</span>
                                <span class="stat-value" id="server-2003-connections">0</span>
                            </div>
                            <div class="stat">
                                <span class="stat-label">Load:</span>
                                <span class="stat-value" id="server-2003-load">0%</span>
                            </div>
                        </div>
                        <div class="server-traffic" id="server-2003-traffic"></div>
                    </div>
                </div>
            </section>

            <!-- Load Balancer Visualization -->
            <section class="panel load-balancer-panel">
                <h2>‚öñÔ∏è Load Balancer Monitor</h2>
                <div class="load-balancer-visual">
                    <div class="load-balancer-node">
                        <div class="lb-icon">üîÑ</div>
                        <div class="lb-label">Load Balancer</div>
                        <div class="lb-algorithm" id="lbAlgorithm">Round Robin</div>
                    </div>
                    <div class="traffic-lines" id="trafficLines">
                        <div class="traffic-line" data-server="2001"></div>
                        <div class="traffic-line" data-server="2002"></div>
                        <div class="traffic-line" data-server="2003"></div>
                    </div>
                </div>
                <div class="distribution-chart">
                    <h3>Connection Distribution</h3>
                    <canvas id="distributionChart" width="300" height="200"></canvas>
                </div>
            </section>

            <!-- Election Dashboard -->
            <section class="panel election-panel">
                <h2>üó≥Ô∏è Coordinator Election</h2>
                <div class="election-status">
                    <div class="current-coordinator">
                        <span class="coordinator-label">Current Coordinator:</span>
                        <span class="coordinator-value" id="currentCoordinator">None</span>
                    </div>
                    <div class="election-state">
                        <span class="election-label">Election Status:</span>
                        <span class="election-value" id="electionStatus">Idle</span>
                    </div>
                </div>
                <div class="election-visualization">
                    <div class="election-timeline" id="electionTimeline"></div>
                </div>
                <div class="logical-clock">
                    <h3>‚è∞ Logical Clock</h3>
                    <div class="clock-display">
                        <span class="clock-value" id="logicalClock">0</span>
                    </div>
                    <div class="clock-history" id="clockHistory"></div>
                </div>
            </section>
        </div>

        <!-- File Operations Interface -->
        <section class="panel file-operations-panel">
            <h2>üìÅ File Operations</h2>
            <div class="file-operations-grid">
                <!-- Upload Section -->
                <div class="upload-section">
                    <h3>üì§ Upload Files</h3>
                    <div class="upload-area" id="uploadArea">
                        <div class="upload-icon">üìÅ</div>
                        <div class="upload-text">
                            <p>Drag & drop files here</p>
                            <p>or click to browse</p>
                        </div>
                        <input type="file" id="fileInput" multiple accept="*/*" hidden>
                    </div>
                    <div class="upload-progress" id="uploadProgress"></div>
                </div>

                <!-- File Manager -->
                <div class="file-manager">
                    <h3>üìã File Manager</h3>
                    <div class="file-controls">
                        <input type="text" id="fileSearch" placeholder="üîç Search files...">
                        <button id="refreshFiles" class="btn btn-small">üîÑ Refresh</button>
                    </div>
                    <div class="file-list" id="fileList">
                        <div class="no-files">No files available</div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Database & System Monitor -->
        <div class="monitor-grid">
            <!-- Database Monitor -->
            <section class="panel database-panel">
                <h2>üíæ Database Monitor</h2>
                <div class="database-status">
                    <div class="db-primary">
                        <div class="db-icon">üóÑÔ∏è</div>
                        <div class="db-info">
                            <div class="db-name">Primary Database</div>
                            <div class="db-file">shared.db</div>
                            <div class="db-status" id="dbStatus">
                                <span class="status-dot"></span>
                                <span>Offline</span>
                            </div>
                        </div>
                    </div>
                    <div class="backup-system">
                        <h3>üíø Backup System</h3>
                        <div class="backup-status">
                            <div class="backup-item">
                                <span class="backup-label">Last Backup:</span>
                                <span class="backup-value" id="lastBackup">Never</span>
                            </div>
                            <div class="backup-item">
                                <span class="backup-label">Backup Size:</span>
                                <span class="backup-value" id="backupSize">0 KB</span>
                            </div>
                            <div class="backup-indicator" id="backupIndicator"></div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- System Resources -->
            <section class="panel resources-panel">
                <h2>üìä System Resources</h2>
                <div class="resource-monitors">
                    <div class="resource-item">
                        <div class="resource-label">CPU Usage</div>
                        <div class="resource-bar">
                            <div class="resource-fill" id="cpuUsage" style="width: 0%"></div>
                        </div>
                        <div class="resource-value" id="cpuValue">0%</div>
                    </div>
                    <div class="resource-item">
                        <div class="resource-label">Memory Usage</div>
                        <div class="resource-bar">
                            <div class="resource-fill" id="memoryUsage" style="width: 0%"></div>
                        </div>
                        <div class="resource-value" id="memoryValue">0%</div>
                    </div>
                    <div class="resource-item">
                        <div class="resource-label">Network Activity</div>
                        <div class="resource-bar">
                            <div class="resource-fill" id="networkActivity" style="width: 0%"></div>
                        </div>
                        <div class="resource-value" id="networkValue">0 KB/s</div>
                    </div>
                    <div class="resource-item">
                        <div class="resource-label">Local Storage</div>
                        <div class="resource-bar">
                            <div class="resource-fill" id="storageUsage" style="width: 0%"></div>
                        </div>
                        <div class="resource-value" id="storageValue">0 MB</div>
                    </div>
                </div>
            </section>
        </div>

        <!-- Operation Log -->
        <section class="panel log-panel">
            <h2>üìú Operation Log</h2>
            <div class="log-controls">
                <button id="clearLog" class="btn btn-small">üóëÔ∏è Clear Log</button>
                <div class="log-filters">
                    <label>
                        <input type="checkbox" id="filterInfo" checked> Info
                    </label>
                    <label>
                        <input type="checkbox" id="filterWarning" checked> Warning
                    </label>
                    <label>
                        <input type="checkbox" id="filterError" checked> Error
                    </label>
                </div>
            </div>
            <div class="log-content" id="logContent"></div>
        </section>
    </div>

    <!-- File Preview Modal -->
    <div class="modal" id="filePreviewModal">
        <div class="modal-content">
            <div class="modal-header">
                <h3 id="previewFileName">File Preview</h3>
                <button class="modal-close" id="closePreview">&times;</button>
            </div>
            <div class="modal-body">
                <div class="preview-content" id="previewContent"></div>
            </div>
            <div class="modal-footer">
                <button id="downloadPreviewFile" class="btn btn-primary">üì• Download</button>
            </div>
        </div>
    </div>

    <!-- Toast Notifications -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Scripts -->
    <script src="scripts/websocket.js"></script>
    <script src="scripts/fileOperations.js"></script>
    <script src="scripts/visualization.js"></script>
    <script src="scripts/ui.js"></script>
    <script src="scripts/app.js"></script>
</body>
</html>